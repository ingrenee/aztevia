(function(e){function r(e,t,n){var r,i,s,o,u,a,f,l,c,h=0;u=e.offset();r=u.left;s=u.top;i=r+e.outerWidth();o=s+e.outerHeight();a=t>i?i:t>r?t:r;f=n>o?o:n>s?n:s;l=Math.abs(a-t);c=Math.abs(f-n);return Math.sqrt(l*l+c*c)}function i(n){var r=n.pageX,i=n.pageY,s=-1,o=e([]);while(o[0]=t[++s]){o.triggerHandler("proximity",[r,i])}}var t=e([]),n=e(document);e.event.special.proximity={defaults:{max:100,min:0,throttle:0,fireOutOfBounds:1},setup:function(e){if(!t[0])n.mousemove(i);t=t.add(this)},add:function(t){var n=t.handler,i=e.extend({},e.event.special.proximity.defaults,t.data),s=0,o=0,u=e(this);t.handler=function(e,t,a){var f=i.max,l=i.min,c=i.throttle,h=+(new Date),p,d,v,m=i.fireOutOfBounds;if(c&&s+c>h){return}s=h;p=r(u,t,a);v=p<f&&p>l;if(m||v){if(v){o=0}else{if(typeof m==="number"&&o>m){return}++o}d=e.proximity=1-(p<f?p<l?0:p/f:1);e.distance=p;e.pageX=t;e.pageY=a;e.data=i;return n.call(this,e,d,p)}}},teardown:function(){t=t.not(this);if(!t[0])n.unbind("mousemove",i)}}})(jQuery)